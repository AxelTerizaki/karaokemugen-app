{"version":3,"sources":["pages/Components/EditableTagGroup.js","pages/Series/SeriesForm.js","pages/Series/SeriesEdit.js"],"names":["EditableTagGroup","props","_this","Object","_home_bibah_Documents_Karaoke_Mugen_karaokemugen_app_react_client_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","this","_home_bibah_Documents_Karaoke_Mugen_karaokemugen_app_react_client_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__","_home_bibah_Documents_Karaoke_Mugen_karaokemugen_app_react_client_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__","call","state","value","inputVisible","DS","handleClose","removedTag","tags","filter","tag","setState","onChange","showInput","input","focus","handleInputConfirm","val","indexOf","_home_bibah_Documents_Karaoke_Mugen_karaokemugen_app_react_client_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","concat","getTags","_ref","_home_bibah_Documents_Karaoke_Mugen_karaokemugen_app_react_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_bibah_Documents_Karaoke_Mugen_karaokemugen_app_react_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","type","wrap","_context","prev","next","abrupt","data","axios","get","params","stop","_x","_x2","apply","arguments","getSeries","_ref2","_callee2","_context2","_x3","search","searchTags","searchSeries","searchLangs","languages","langs","all","forEach","lang","push","text","name","sortByProp","then","series","content","map","serie","tagType","result","name_i18n","onCheck","array","sort","b","checkboxes","_this2","_this$state","react__WEBPACK_IMPORTED_MODULE_8___default","createElement","antd__WEBPACK_IMPORTED_MODULE_10__","Group","defaultValue","style","width","antd__WEBPACK_IMPORTED_MODULE_11__","antd__WEBPACK_IMPORTED_MODULE_12__","align","span","isLongTag","length","tagElem","antd__WEBPACK_IMPORTED_MODULE_13__","key","closable","afterClose","slice","antd__WEBPACK_IMPORTED_MODULE_14__","title","antd__WEBPACK_IMPORTED_MODULE_15__","Item","wrapperCol","offset","antd__WEBPACK_IMPORTED_MODULE_16__","ref","dataSource","onSearch","currentVal","filterOption","inputValue","option","deburr","children","toUpperCase","antd__WEBPACK_IMPORTED_MODULE_17__","onClick","className","background","borderStyle","antd__WEBPACK_IMPORTED_MODULE_18__","React","Component","SerieForm","classCallCheck","possibleConstructorReturn","getPrototypeOf","showSelect","selectVisible","select","handleSubmit","e","preventDefault","i18n","form","validateFields","err","values","i18nField","save","message","error","addLang","includes","newI18n","removeLang","keys","console","log","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","obj","setFieldsValue","return","getFieldDecorator","react_default","es_form","onSubmit","hasFeedback","label","tooltip","icon","labelCol","initialValue","rules","required","placeholder","aliases","join","langKey","row","gutter","where","col","disabled","es_select","showSearch","Option","es_button","htmlType","serie_id","Form","create","newSerie","SerieEdit","saveNew","post","infoMessage","catch","errorMessage","response","status","statusText","saveUpdate","put","loadSerie","loading","match","res","serieData","objectSpread","layout","Content","padding","textAlign","SeriesForm","connect","loadingActive","navigation","dispatch","active","url"],"mappings":"6VAOqBA,cAEpB,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAClBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAIPQ,MAAQ,CACPC,MAAOR,EAAKD,MAAMS,OAAS,GAC3BC,cAAc,EACdC,GAAI,IARcV,EAWnBW,YAAc,SAACC,GACd,IAAMC,EAAOb,EAAKO,MAAMC,MAAMM,OAAO,SAAAC,GAAG,OAAIA,IAAQH,IACpDZ,EAAKgB,SAAS,CAAER,MAAOK,IACvBb,EAAKD,MAAMkB,UAAYjB,EAAKD,MAAMkB,SAASJ,IAdzBb,EAiBnBkB,UAAY,WACXlB,EAAKgB,SAAS,CAAEP,cAAc,GAAQ,kBAAMT,EAAKmB,MAAMC,WAlBrCpB,EAqBnBqB,mBAAqB,SAACC,GACrB,IAAIT,EAAOb,EAAKO,MAAMC,MAClBc,IAA8B,IAAvBT,EAAKU,QAAQD,KACvBT,EAAIZ,OAAAuB,EAAA,EAAAvB,CAAOY,GAAPY,OAAA,CAAaH,KAElBtB,EAAKgB,SAAS,CACbR,MAAOK,EACPJ,cAAc,IAEfT,EAAKD,MAAMkB,UAAYjB,EAAKD,MAAMkB,SAASJ,IA9BzBb,EAiCnB0B,QAjCmB,eAAAC,EAAA1B,OAAA2B,EAAA,EAAA3B,CAAA4B,EAAAC,EAAAC,KAiCT,SAAAC,EAAOlB,EAAQmB,GAAf,OAAAJ,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACM,KAAXvB,EADK,CAAAqB,EAAAE,KAAA,eAAAF,EAAAG,OAAA,SAEA,CAACC,KAAM,KAFP,cAAAJ,EAAAG,OAAA,SAIFE,IAAMC,IAAI,YAAa,CAC7BC,OAAQ,CACPT,KAAMA,EACNnB,OAAQA,MAPD,wBAAAqB,EAAAQ,SAAAX,EAAA7B,SAjCS,gBAAAyC,EAAAC,GAAA,OAAAlB,EAAAmB,MAAA3C,KAAA4C,YAAA,GAAA/C,EA6CnBgD,UA7CmB,eAAAC,EAAAhD,OAAA2B,EAAA,EAAA3B,CAAA4B,EAAAC,EAAAC,KA6CP,SAAAmB,EAAOpC,GAAP,OAAAe,EAAAC,EAAAI,KAAA,SAAAiB,GAAA,cAAAA,EAAAf,KAAAe,EAAAd,MAAA,UACI,KAAXvB,EADO,CAAAqC,EAAAd,KAAA,eAAAc,EAAAb,OAAA,SAEF,CAACC,KAAM,KAFL,cAAAY,EAAAb,OAAA,SAIJE,IAAMC,IAAI,cAAe,CAC/BC,OAAQ,CACP5B,OAAQA,MANC,wBAAAqC,EAAAR,SAAAO,EAAA/C,SA7CO,gBAAAiD,GAAA,OAAAH,EAAAH,MAAA3C,KAAA4C,YAAA,GAAA/C,EAwDnBqD,OAAS,SAAC/B,GACiB,QAAtBtB,EAAKD,MAAMsD,QAAkBrD,EAAKsD,WAAWhC,GACvB,UAAtBtB,EAAKD,MAAMsD,QAAoBrD,EAAKuD,aAAajC,GAC3B,SAAtBtB,EAAKD,MAAMsD,QAAmBrD,EAAKwD,YAAYlC,IA3DjCtB,EA8DnBwD,YAAc,SAAClC,GACd,IAAImC,EAAY,GAChBC,IAAMC,MAAMC,QAAQ,SAAAC,GAAI,OAAIJ,EAAUK,KAAK,CAACtD,MAAOqD,EAAK,MAAOE,KAAMF,EAAKG,SAC1EP,EAAUK,KAAK,CAACtD,MAAO,MAAOuD,KAAM,oBACpCN,EAAUK,KAAK,CAACtD,MAAO,MAAOuD,KAAM,uBACpCN,EAAUK,KAAK,CAACtD,MAAO,MAAOuD,KAAM,0BACpC/D,EAAKgB,SAAS,CAAEN,GAAIV,EAAKiE,WAAWR,EAAW,SAAW,MApExCzD,EAuEnBuD,aAAe,SAACjC,GACftB,EAAKgD,UAAU1B,GAAK4C,KAAK,SAAAC,GACxBnE,EAAKgB,SAAS,CAAEN,GAAIyD,EAAO5B,KAAK6B,QAAQC,IAAI,SAAAC,GAAK,OAAIA,EAAMN,QAAS,QAzEnDhE,EA6EnBsD,WAAa,SAAChC,GACbtB,EAAK0B,QAAQJ,EAAKtB,EAAKD,MAAMwE,SAASL,KAAK,SAAArD,GAC1C,IAAI2D,EAAS3D,EAAK0B,KAAK6B,QAAQC,IAAI,SAAAtD,GAClC,MAAO,CAAEP,MAAOO,EAAIiD,KAAMD,KAAMhD,EAAI0D,cAC/B,GACND,EAASxE,EAAKiE,WAAWO,EAAQ,QACjCxE,EAAKgB,SAAS,CAAEN,GAAI8D,OAnFHxE,EAuFnB0E,QAAU,SAACpD,GACVtB,EAAKD,MAAMkB,UAAYjB,EAAKD,MAAMkB,SAASK,IAxFzBtB,EA2FnBiE,WAAa,SAACU,EAAOrD,GACpB,OAAOqD,EAAMC,KAAK,SAAC9C,EAAE+C,GACpB,OAAQ/C,EAAER,GAAOuD,EAAEvD,GAAQ,EAAKQ,EAAER,GAAOuD,EAAEvD,IAAS,EAAI,KA3FrDtB,EAAKD,MAAM+E,YAAY9E,EAAKqD,SAFdrD,wEAiGV,IAAA+E,EAAA5E,KAAA6E,EACwB7E,KAAKI,MAA7BC,EADAwE,EACAxE,MAAOC,EADPuE,EACOvE,aACf,OAAIN,KAAKJ,MAAM+E,WAEbG,EAAAnD,EAAAoD,cAAA,WAECD,EAAAnD,EAAAoD,cAACC,EAAA,EAASC,MAAV,CAAgBC,aAAclF,KAAKI,MAAMC,MAAO8E,MAAO,CAAEC,MAAO,QAAUtE,SAAUd,KAAKuE,SACxFO,EAAAnD,EAAAoD,cAACM,EAAA,EAAD,KAEErF,KAAKI,MAAMG,GAAG2D,IAAI,SAACtD,GAClB,OACCkE,EAAAnD,EAAAoD,cAACO,EAAA,EAAD,CAAKC,MAAM,OAAOC,KAAM,GACvBV,EAAAnD,EAAAoD,cAACC,EAAA,EAAD,CAAU3E,MAAOO,EAAIP,OAAQO,EAAIgD,YAaxCkB,EAAAnD,EAAAoD,cAAA,WAEE1E,EAAM6D,IAAI,SAACtD,GACLA,IAAKA,EAAM,IAChB,IAAM6E,EAAY7E,EAAI8E,OAAS,GACzBC,EACLb,EAAAnD,EAAAoD,cAACa,EAAA,EAAD,CAAKC,IAAKjF,EAAKkF,SAAS,OAAOC,WAAY,kBAAMnB,EAAKpE,YAAYI,KAChE6E,EAAS,GAAAnE,OAAMV,EAAIoF,MAAM,EAAG,IAAnB,OAA8BpF,GAG1C,OAAO6E,EAAYX,EAAAnD,EAAAoD,cAACkB,EAAA,EAAD,CAASC,MAAOtF,EAAKiF,IAAKjF,GAAM+E,GAAqBA,IAEzErF,GACAwE,EAAAnD,EAAAoD,cAACoB,EAAA,EAAKC,KAAN,CACCC,WAAY,CAAEb,KAAM,GAAIc,OAAQ,IAEhCxB,EAAAnD,EAAAoD,cAACwB,EAAA,EAAD,CACCC,IAAK,SAAAxF,GAAK,OAAI4D,EAAK5D,MAAQA,GAC3ByF,WAAYzG,KAAKI,MAAMG,GACvBmG,SAAW1G,KAAKkD,OAChBpC,SAAW,SAAAK,GAAG,OAAIyD,EAAK+B,WAAaxF,GACpCyF,aAAc,SAACC,EAAYC,GAAb,OAAmH,IAA3FC,IAAOD,EAAOlH,MAAMoH,SAASC,eAAe7F,QAAQ2F,IAAOF,GAAYI,kBAG9GnC,EAAAnD,EAAAoD,cAACmC,EAAA,EAAD,CAAQpF,KAAK,UAAUqF,QAAS,kBAAMvC,EAAK1D,mBAAmB0D,EAAK+B,aAClES,UAAU,qBADX,aAMA9G,GACDwE,EAAAnD,EAAAoD,cAACa,EAAA,EAAD,CACCuB,QAASnH,KAAKe,UACdoE,MAAO,CAAEkC,WAAY,OAAQC,YAAa,WAE1CxC,EAAAnD,EAAAoD,cAACwC,EAAA,EAAD,CAAMzF,KAAK,SAJZ,gBA3JwC0F,IAAMC,kPCD9CC,cAEL,SAAAA,EAAY9H,GAAO,IAAAC,EAAA,OAAAC,OAAA6H,EAAA,EAAA7H,CAAAE,KAAA0H,IAClB7H,EAAAC,OAAA8H,EAAA,EAAA9H,CAAAE,KAAAF,OAAA+H,EAAA,EAAA/H,CAAA4H,GAAAvH,KAAAH,KAAMJ,KA4BPkI,WAAa,WACZjI,EAAKgB,SAAS,CAAEkH,eAAe,GAAQ,kBAAMlI,EAAKmI,OAAO/G,WA9BvCpB,EAiCnBoI,aAAe,SAACC,GACfA,EAAEC,iBACEtI,EAAKO,MAAMgI,KAAK1C,OAAS,EAC5B7F,EAAKD,MAAMyI,KAAKC,eAAe,SAACC,EAAKC,GACpC,IAAKD,EAAK,CACT,IAAME,EAAY,GAClB5I,EAAKO,MAAMgI,KAAK3E,QAAQ,SAACC,GACxB+E,EAAU/E,GAAQ8E,EAAM,QAAAlH,OAASoC,WAC1B8E,EAAM,QAAAlH,OAASoC,MAEvB8E,EAAOJ,KAAOK,EACd5I,EAAKD,MAAM8I,KAAKF,MAIlBG,IAAQC,MAAM,qDAhDG/I,EAqDnBgJ,QAAU,SAACnF,GACV,IAAK7D,EAAKO,MAAMgI,KAAKU,SAASpF,GAAO,CACpC,IAAMqF,EAAUlJ,EAAKO,MAAMgI,KAAK9G,OAAO,CAACoC,IACxC7D,EAAKgB,SAAS,CAAEuH,KAAMW,IAEvBlJ,EAAKgB,SAAS,CACbkH,eAAe,KA3DElI,EA+DnBmJ,WAAa,SAACtF,GACb,GAAI7D,EAAKO,MAAMgI,KAAKU,SAASpF,GAAO,CACnC,IAAMqF,EAAUlJ,EAAKO,MAAMgI,KAAKzH,OAAO,SAAAuH,GAAC,OAAIA,IAAMxE,IAClD7D,EAAKgB,SAAS,CAAEuH,KAAMW,MAhEvBlJ,EAAKO,MAAQ,CACZgI,KAAM,GACN9E,UAAW,GACXyE,eAAe,GAEhBxE,IAAMC,MAAMC,QAAQ,SAAAC,GAAI,OAAI7D,EAAKO,MAAMkD,UAAUK,KAAK,CAACtD,MAAOqD,EAAK,MAAOE,KAAMF,EAAKG,SACjFhE,EAAKD,MAAMuE,MAAMiE,MACpBtI,OAAOmJ,KAAKpJ,EAAKD,MAAMuE,MAAMiE,MAAM3E,QAAQ,SAAAC,GAC1C7D,EAAKO,MAAMgI,KAAKzE,KAAKD,GACrB7D,EAAKO,MAAL,QAAAkB,OAAmBoC,IAAU7D,EAAKD,MAAMuE,MAAMiE,KAAK1E,KAGrDwF,QAAQC,IAAItJ,EAAKO,OACjB8I,QAAQC,IAAItJ,EAAKD,MAAMuE,OAfLtE,mFAkBC,IAAAuJ,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAGnB,QAAAC,EAAAC,EAAmBzJ,KAAKI,MAAMgI,KAA9BsB,OAAAC,cAAAP,GAAAI,EAAAC,EAAAvH,QAAA0H,MAAAR,GAAA,EAAoC,KAAzB1F,EAAyB8F,EAAAnJ,MAC7BwJ,EAAM,GACZA,EAAG,QAAAvI,OAASoC,IAAU1D,KAAKJ,MAAMuE,MAAMiE,KAAK1E,GAC5C1D,KAAKJ,MAAMyI,KAAKyB,eAAeD,IANb,MAAAtB,GAAAc,GAAA,EAAAC,EAAAf,EAAA,YAAAa,GAAA,MAAAK,EAAAM,QAAAN,EAAAM,SAAA,WAAAV,EAAA,MAAAC,GAQnBtJ,KAAKJ,MAAMyI,KAAKC,kDA4CR,IAAA1D,EAAA5E,KACDgK,EAAqBhK,KAAKJ,MAAMyI,KAAhC2B,kBACCjC,EAAkB/H,KAAKI,MAAvB2H,cACR,OACCkC,EAAAtI,EAAAoD,cAACmF,EAAA,EAAD,CACCC,SAAUnK,KAAKiI,aACfb,UAAU,cAEV6C,EAAAtI,EAAAoD,cAACmF,EAAA,EAAK9D,KAAN,CAAWgE,aAAW,EACrBC,MACCJ,EAAAtI,EAAAoD,cAAA,gCACCkF,EAAAtI,EAAAoD,cAACuF,EAAA,EAAD,CAASpE,MAAM,sFACd+D,EAAAtI,EAAAoD,cAACwF,EAAA,EAAD,CAAMzI,KAAK,wBAId0I,SAAU,CAAEhF,KAAM,GAClBa,WAAY,CAAEb,KAAM,EAAGc,OAAQ,IAE9B0D,EAAkB,OAAQ,CAC1BS,aAAczK,KAAKJ,MAAMuE,MAAMN,KAC/B6G,MAAO,CAAC,CACPC,UAAU,EACVhC,QAAS,yBAJVqB,CAMEC,EAAAtI,EAAAoD,cAAC/D,EAAA,EAAD,CACF4J,YAAY,cACZP,MAAM,kBAGRJ,EAAAtI,EAAAoD,cAACmF,EAAA,EAAK9D,KAAN,CACCiE,MACCJ,EAAAtI,EAAAoD,cAAA,4BACCkF,EAAAtI,EAAAoD,cAACuF,EAAA,EAAD,CAASpE,MAAM,sMACd+D,EAAAtI,EAAAoD,cAACwF,EAAA,EAAD,CAAMzI,KAAK,wBAId0I,SAAU,CAAEhF,KAAM,GAClBa,WAAY,CAAEb,KAAM,GAAIc,OAAQ,IAE/B0D,EAAkB,UAAW,CAC7BS,aAAczK,KAAKJ,MAAMuE,MAAM0G,SAD/Bb,CAEEC,EAAAtI,EAAAoD,cAACpF,EAAA,EAAD,CACFuD,OAAQ,UACRpC,SAAW,SAACJ,GAAD,OAAUkE,EAAKhF,MAAMyI,KAAKyB,eAAe,CAAEe,QAASnK,EAAKoK,KAAK,YAG3Eb,EAAAtI,EAAAoD,cAAA,mCAECkF,EAAAtI,EAAAoD,cAACuF,EAAA,EAAD,CAASpE,MAAM,wFACd+D,EAAAtI,EAAAoD,cAACwF,EAAA,EAAD,CAAMzI,KAAK,wBAGX9B,KAAKI,MAAMgI,KAAKlE,IAAI,SAAA6G,GAAO,OAC5Bd,EAAAtI,EAAAoD,cAACiG,EAAA,EAAD,CAAKC,OAAQ,GACZhB,EAAAtI,EAAAoD,cAACmF,EAAA,EAAK9D,KAAN,CACCgE,aAAW,EACXC,MAAO9G,IAAM2H,MAAM,KAAMH,GAASlH,KAClC2G,SAAU,CAAEhF,KAAM,GAClBa,WAAY,CAAEb,KAAM,GAAIc,OAAQ,IAE/B0D,EAAkB,QAAUe,EAAS,CACrCN,aAAc7F,EAAKxE,MAAL,QAAAkB,OAAmByJ,IACjCL,MAAO,CAAC,CACPC,UAAU,EACVhC,QAAS,gCAJVqB,CAOAC,EAAAtI,EAAAoD,cAACoG,EAAA,EAAD,CAAK3F,KAAM,IAEVyE,EAAAtI,EAAAoD,cAAC/D,EAAA,EAAD,CACC4J,YAAY,wBACZ1F,aAAcN,EAAKxE,MAAL,QAAAkB,OAAmByJ,IACjCV,MAAOU,MAITjL,OAAOmJ,KAAKrE,EAAKxE,MAAMgI,MAAM1C,OAAS,EACtCuE,EAAAtI,EAAAoD,cAACoG,EAAA,EAAD,CAAK3F,KAAM,GACVyE,EAAAtI,EAAAoD,cAACuF,EAAA,EAAD,CAASpE,MAAM,eACd+D,EAAAtI,EAAAoD,cAACwF,EAAA,EAAD,CACCnD,UAAU,wBACVtF,KAAK,iBACLsJ,SAAqC,IAA3BxG,EAAKxE,MAAMgI,KAAK1C,OAC1ByB,QAAS,kBAAMvC,EAAKoE,WAAW+B,QAE/B,SAKNhD,GACAkC,EAAAtI,EAAAoD,cAACmF,EAAA,EAAK9D,KAAN,CACCiE,MAAM,oBACNG,SAAU,CAAEhF,KAAM,GAClBa,WAAY,CAAEb,KAAM,EAAGc,OAAQ,IAE/B2D,EAAAtI,EAAAoD,cAACsG,EAAA,EAAD,CACCC,YAAU,EACV9E,IAAK,SAAAwB,GAAM,OAAIpD,EAAKoD,OAASA,GAC7BlH,SAAU,SAAAT,GAAK,OAAIuE,EAAKiE,QAAQxI,KAC9BL,KAAKI,MAAMkD,UAAUY,IAAI,SAAAR,GAAI,OAAKuG,EAAAtI,EAAAoD,cAACsG,EAAA,EAAOE,OAAR,CAAelL,MAAOqD,EAAKrD,OAA3B,IAAoCqD,EAAKE,KAAzC,KAAiDF,EAAKrD,MAAM4G,cAA5D,WAIrCc,GACDkC,EAAAtI,EAAAoD,cAACnE,EAAA,EAAD,CACCuG,QAASnH,KAAK8H,WACd3C,MAAO,CAAEmC,YAAa,WAEtB2C,EAAAtI,EAAAoD,cAACwF,EAAA,EAAD,CAAMzI,KAAK,SAJZ,QAODmI,EAAAtI,EAAAoD,cAACmF,EAAA,EAAK9D,KAAN,CACCC,WAAY,CAAEb,KAAM,EAAGc,OAAQ,IAE/B2D,EAAAtI,EAAAoD,cAACyG,EAAA,EAAD,CAAQ1J,KAAK,UAAU2J,SAAS,SAASrE,UAAU,sBAAnD,gBAID6C,EAAAtI,EAAAoD,cAACmF,EAAA,EAAK9D,KAAN,KACE4D,EAAkB,WAAY,CAC9BS,aAAczK,KAAKJ,MAAMuE,MAAMuH,UAD/B1B,CAEEC,EAAAtI,EAAAoD,cAAC/D,EAAA,EAAD,CAAOc,KAAK,aAEhBmI,EAAAtI,EAAAoD,cAACmF,EAAA,EAAK9D,KAAN,KACE4D,EAAkB,OAAQ,CAC1BS,aAAczK,KAAKJ,MAAMuE,MAAMiE,MAD/B4B,CAEEC,EAAAtI,EAAAoD,cAAC/D,EAAA,EAAD,CAAOc,KAAK,qBAzMI2F,aAqNTkE,MAAKC,QAALD,CAAcjE,4CCnNvBmE,EAAW,CAChBhI,KAAM,KACNgH,QAAS,GACTzC,KAAM,IAGD0D,6MAEL1L,MAAQ,CACP+D,MAAO,KACPuE,KAAM,gBAOPqD,QAAU,SAAC5H,GACV9B,IAAM2J,KAAK,cAAe7H,GACxBJ,KAAK,WACLlE,EAAKD,MAAMqM,YAAY,+BACvBpM,EAAKD,MAAM+D,KAAK,aAEhBuI,MAAM,SAAA3D,GACN1I,EAAKD,MAAMuM,aAAX,GAAA7K,OAA2BiH,EAAI6D,SAASC,OAAxC,MAAA/K,OAAmDiH,EAAI6D,SAASE,WAAhE,MAAAhL,OAA+EiH,EAAI6D,SAAShK,YAI/FmK,WAAa,SAACpI,GACb9B,IAAMmK,IAAN,eAAAlL,OAAyB6C,EAAMuH,UAAYvH,GACzCJ,KAAK,WACLlE,EAAKD,MAAMqM,YAAY,8BACvBpM,EAAKD,MAAM+D,KAAK,aAEhBuI,MAAM,SAAA3D,GACN1I,EAAKD,MAAMuM,aAAX,GAAA7K,OAA2BiH,EAAI6D,SAASC,OAAxC,MAAA/K,OAAmDiH,EAAI6D,SAASE,WAAhE,MAAAhL,OAA+EiH,EAAI6D,SAAShK,YAI/FqK,UAAY,WACX5M,EAAKD,MAAM8M,SAAQ,GACf7M,EAAKD,MAAM+M,OAAS9M,EAAKD,MAAM+M,MAAMpK,OAAOmJ,SAC/CrJ,IAAMC,IAAN,eAAAhB,OAAyBzB,EAAKD,MAAM+M,MAAMpK,OAAOmJ,WAC/C3H,KAAK,SAAA6I,GACL,IAAMC,EAAS/M,OAAAgN,EAAA,EAAAhN,CAAA,GAAO8M,EAAIxK,MAC1ByK,EAAUnB,SAAW7L,EAAKD,MAAM+M,MAAMpK,OAAOmJ,SAC7C7L,EAAKgB,SAAS,CAACsD,MAAO0I,EAAWnE,KAAM7I,EAAK0M,aAC5C1M,EAAKD,MAAM8M,SAAQ,KAEnBR,MAAM,SAAA3D,GACN1I,EAAKD,MAAMuM,aAAX,GAAA7K,OAA2BiH,EAAI6D,SAASC,OAAxC,MAAA/K,OAAmDiH,EAAI6D,SAASE,WAAhE,MAAAhL,OAA+EiH,EAAI6D,SAAShK,OAC5FvC,EAAKD,MAAM8M,SAAQ,MAGrB7M,EAAKgB,SAAS,CAACsD,MAAMrE,OAAAgN,EAAA,EAAAhN,CAAA,GAAK+L,GAAWnD,KAAM7I,EAAKkM,UAChDlM,EAAKD,MAAM8M,SAAQ,wFAzCpB1M,KAAKyM,6CA+CL,OACCxC,EAAAtI,EAAAoD,cAACgI,EAAA,EAAOC,QAAR,CAAgB7H,MAAO,CAAC8H,QAAS,YAAaC,UAAW,WACvDlN,KAAKI,MAAM+D,OAAU8F,EAAAtI,EAAAoD,cAACoI,EAAD,CAAWhJ,MAAOnE,KAAKI,MAAM+D,MAAOuE,KAAM1I,KAAKI,MAAMsI,eAzDvDjB,aA0ET2F,sBAXS,SAAChN,GAAD,MAAY,CACnCiN,cAAejN,EAAMkN,WAAWZ,UAGN,SAACa,GAAD,MAAe,CACzCb,QAAS,SAACc,GAAD,OAAYD,EAASb,YAAQc,KACtCvB,YAAa,SAACtD,GAAD,OAAa4E,EAAStB,YAAYtD,KAC/CwD,aAAc,SAACxD,GAAD,OAAa4E,EAASpB,YAAaxD,KACjDhF,KAAM,SAAC8J,GAAD,OAASF,EAAS5J,YAAK8J,OAGfL,CAA6CtB","file":"static/js/7.ea606720.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport deburr from 'lodash.deburr';\r\nimport {Checkbox, Row, Col, Button, Form, AutoComplete, Icon, Tag, Tooltip} from 'antd';\r\nimport axios from 'axios/index';\r\nimport langs from 'langs';\r\n\r\nexport default class EditableTagGroup extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tif (this.props.checkboxes) this.search();\r\n\t}\r\n\r\n\tstate = {\r\n\t\tvalue: this.props.value || [],\r\n\t\tinputVisible: false,\r\n\t\tDS: []\r\n\t};\r\n\r\n\thandleClose = (removedTag) => {\r\n\t\tconst tags = this.state.value.filter(tag => tag !== removedTag);\r\n\t\tthis.setState({ value: tags });\r\n\t\tthis.props.onChange && this.props.onChange(tags);\r\n\t};\r\n\r\n\tshowInput = () => {\r\n\t\tthis.setState({ inputVisible: true }, () => this.input.focus());\r\n\t};\r\n\r\n\thandleInputConfirm = (val) => {\r\n\t\tlet tags = this.state.value;\r\n\t\tif (val && tags.indexOf(val) === -1) {\r\n\t\t\ttags = [...tags, val];\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tvalue: tags,\r\n\t\t\tinputVisible: false\r\n\t\t});\r\n\t\tthis.props.onChange && this.props.onChange(tags);\r\n\t};\r\n\r\n\tgetTags = async (filter, type) => {\r\n\t\tif (filter === '') {\r\n\t\t\treturn ({data: []});\r\n\t\t}\r\n\t\treturn axios.get('/api/tags', {\r\n\t\t\tparams: {\r\n\t\t\t\ttype: type,\r\n\t\t\t\tfilter: filter\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tgetSeries = async (filter) => {\r\n\t\tif (filter === '') {\r\n\t\t\treturn ({data: []});\r\n\t\t}\r\n\t\treturn axios.get('/api/series', {\r\n\t\t\tparams: {\r\n\t\t\t\tfilter: filter\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tsearch = (val) => {\r\n\t\tif (this.props.search === 'tag') this.searchTags(val);\r\n\t\tif (this.props.search === 'serie') this.searchSeries(val);\r\n\t\tif (this.props.search === 'lang') this.searchLangs(val);\r\n\t};\r\n\r\n\tsearchLangs = (val) => {\r\n\t\tlet languages = [];\r\n\t\tlangs.all().forEach(lang => languages.push({value: lang['2B'], text: lang.name}));\r\n\t\tlanguages.push({value: 'mul', text: 'Multi-languages'});\r\n\t\tlanguages.push({value: 'und', text: 'Undefined Language'});\r\n\t\tlanguages.push({value: 'zxx', text: 'No Linguistic Content'});\r\n\t\tthis.setState({ DS: this.sortByProp(languages, 'text') || [] });\r\n\t}\r\n\r\n\tsearchSeries = (val) => {\r\n\t\tthis.getSeries(val).then(series => {\r\n\t\t\tthis.setState({ DS: series.data.content.map(serie => serie.name) || [] });\r\n\t\t});\r\n\t};\r\n\r\n\tsearchTags = (val) => {\r\n\t\tthis.getTags(val, this.props.tagType).then(tags => {\r\n\t\t\tlet result = tags.data.content.map(tag => {\r\n\t\t\t\treturn { value: tag.name, text: tag.name_i18n };\r\n\t\t\t}) || [];\r\n\t\t\tresult = this.sortByProp(result, 'text');\r\n\t\t\tthis.setState({ DS: result });\r\n\t\t});\r\n\t};\r\n\r\n\tonCheck = (val) => {\r\n\t\tthis.props.onChange && this.props.onChange(val);\r\n\t};\r\n\r\n\tsortByProp = (array, val) => {\r\n\t\treturn array.sort((a,b) => {\r\n\t\t\treturn (a[val] > b[val]) ? 1 : (a[val] < b[val]) ? -1 : 0;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { value, inputVisible } = this.state;\r\n\t\tif (this.props.checkboxes) {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\r\n\t\t\t\t\t<Checkbox.Group defaultValue={this.state.value} style={{ width: '100%' }} onChange={this.onCheck}>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.DS.map((tag) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Col align='left' span={8}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox value={tag.value}>{tag.text}\r\n\t\t\t\t\t\t\t\t\t\t\t</Checkbox>\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Checkbox.Group>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue.map((tag) => {\r\n\t\t\t\t\t\t\tif (!tag) tag = '';\r\n\t\t\t\t\t\t\tconst isLongTag = tag.length > 20;\r\n\t\t\t\t\t\t\tconst tagElem = (\r\n\t\t\t\t\t\t\t\t<Tag key={tag} closable='true' afterClose={() => this.handleClose(tag)}>\r\n\t\t\t\t\t\t\t\t\t{isLongTag ? `${tag.slice(0, 20)}...` : tag}\r\n\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\treturn isLongTag ? <Tooltip title={tag} key={tag}>{tagElem}</Tooltip> : tagElem;\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t{inputVisible && (\r\n\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\twrapperCol={{ span: 10, offset: 0 }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\t\tref={input => this.input = input}\r\n\t\t\t\t\t\t\t\tdataSource={this.state.DS}\r\n\t\t\t\t\t\t\t\tonSearch={ this.search }\r\n\t\t\t\t\t\t\t\tonChange={ val => this.currentVal = val }\r\n\t\t\t\t\t\t\t\tfilterOption={(inputValue, option) => deburr(option.props.children.toUpperCase()).indexOf(deburr(inputValue).toUpperCase()) !== -1}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</AutoComplete>\r\n\t\t\t\t\t\t\t<Button type='primary' onClick={() => this.handleInputConfirm(this.currentVal)}\r\n\t\t\t\t\t\t\t\tclassName='login-form-button'>\r\n\t\t\t\t\t\tAdd Tag\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{!inputVisible && (\r\n\t\t\t\t\t\t<Tag\r\n\t\t\t\t\t\t\tonClick={this.showInput}\r\n\t\t\t\t\t\t\tstyle={{ background: '#fff', borderStyle: 'dashed' }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon type=\"plus\" /> Add\r\n\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nEditableTagGroup.propTypes = {\r\n\ttagType: PropTypes.number,\r\n\tsearch: PropTypes.string.isRequired,\r\n\tonChange: PropTypes.func,\r\n\tvalue: PropTypes.array\r\n};","import React, {Component} from 'react';\r\nimport {Col, Row, message, Tag, Select, Tooltip, Button, Form, Icon, Input} from 'antd';\r\nimport PropTypes from 'prop-types';\r\nimport EditableTagGroup from '../Components/EditableTagGroup';\r\nimport langs from 'langs';\r\n\r\nclass SerieForm extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ti18n: [],\r\n\t\t\tlanguages: [],\r\n\t\t\tselectVisible: false\r\n\t\t};\r\n\t\tlangs.all().forEach(lang => this.state.languages.push({value: lang['2B'], text: lang.name}));\r\n\t\tif (this.props.serie.i18n) {\r\n\t\t\tObject.keys(this.props.serie.i18n).forEach(lang => {\r\n\t\t\t\tthis.state.i18n.push(lang);\r\n\t\t\t\tthis.state[`lang_${lang}`] = this.props.serie.i18n[lang];\r\n\t\t\t});\r\n\t\t}\r\n\t\tconsole.log(this.state);\r\n\t\tconsole.log(this.props.serie);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// For some stupid reason the list of languages won't be filled up, even with initialValue.\r\n\t\t// So we're filling the form here.\r\n\t\tfor (const lang of this.state.i18n) {\r\n\t\t\tconst obj = {};\r\n\t\t\tobj[`lang_${lang}`] = this.props.serie.i18n[lang];\r\n\t\t\tthis.props.form.setFieldsValue(obj);\r\n\t\t}\r\n\t\tthis.props.form.validateFields();\r\n\t}\r\n\r\n\tshowSelect = () => {\r\n\t\tthis.setState({ selectVisible: true }, () => this.select.focus());\r\n\t};\r\n\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (this.state.i18n.length > 0) {\r\n\t\t\tthis.props.form.validateFields((err, values) => {\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tconst i18nField = {};\r\n\t\t\t\t\tthis.state.i18n.forEach((lang) => {\r\n\t\t\t\t\t\ti18nField[lang] = values[`lang_${lang}`];\r\n\t\t\t\t\t\tdelete values[`lang_${lang}`];\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvalues.i18n = i18nField;\r\n\t\t\t\t\tthis.props.save(values);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmessage.error('A series must have at least one name by language');\r\n\t\t}\r\n\t};\r\n\r\n\t// i18n dynamic management\r\n\taddLang = (lang) => {\r\n\t\tif (!this.state.i18n.includes(lang)) {\r\n\t\t\tconst newI18n = this.state.i18n.concat([lang]);\r\n\t\t\tthis.setState({ i18n: newI18n});\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tselectVisible: false\r\n\t\t});\r\n\t};\r\n\r\n\tremoveLang = (lang) => {\r\n\t\tif (this.state.i18n.includes(lang)) {\r\n\t\t\tconst newI18n = this.state.i18n.filter(e => e !== lang);\r\n\t\t\tthis.setState({ i18n: newI18n});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {getFieldDecorator} = this.props.form;\r\n\t\tconst { selectVisible } = this.state;\r\n\t\treturn (\r\n\t\t\t<Form\r\n\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\tclassName='serie-form'\r\n\t\t\t>\r\n\t\t\t\t<Form.Item hasFeedback\r\n\t\t\t\t\tlabel={(\r\n\t\t\t\t\t\t<span>Original Name&nbsp;\r\n\t\t\t\t\t\t\t<Tooltip title=\"This is the internal name used to reference the series in Karaoke Mugen's database\">\r\n\t\t\t\t\t\t\t\t<Icon type=\"question-circle-o\" />\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\tlabelCol={{ span: 3 }}\r\n\t\t\t\t\twrapperCol={{ span: 8, offset: 0 }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{getFieldDecorator('name', {\r\n\t\t\t\t\t\tinitialValue: this.props.serie.name,\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Please enter a name'\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t})(<Input\r\n\t\t\t\t\t\tplaceholder='Series name'\r\n\t\t\t\t\t\tlabel='Series name'\r\n\t\t\t\t\t/>)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\tlabel={(\r\n\t\t\t\t\t\t<span>Aliase(s)&nbsp;\r\n\t\t\t\t\t\t\t<Tooltip title=\"Short names or alternative names a series could be searched. Example : DB for Dragon Ball, or FMA for Full Metal Alchemist, or AnoHana for that series which makes you cry everytime you watch it.\">\r\n\t\t\t\t\t\t\t\t<Icon type=\"question-circle-o\" />\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\tlabelCol={{ span: 3 }}\r\n\t\t\t\t\twrapperCol={{ span: 10, offset: 0 }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{getFieldDecorator('aliases', {\r\n\t\t\t\t\t\tinitialValue: this.props.serie.aliases,\r\n\t\t\t\t\t})(<EditableTagGroup\r\n\t\t\t\t\t\tsearch={'aliases'}\r\n\t\t\t\t\t\tonChange={ (tags) => this.props.form.setFieldsValue({ aliases: tags.join(',') }) }\r\n\t\t\t\t\t/>)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div>\r\n\t\t\t\t\tNames by language&nbsp;\r\n\t\t\t\t\t<Tooltip title=\"There must be at least one name in any language (enter the original name by default)\">\r\n\t\t\t\t\t\t<Icon type=\"question-circle-o\" />\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</div>\r\n\t\t\t\t{ this.state.i18n.map(langKey => (\r\n\t\t\t\t\t<Row gutter={8}>\r\n\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\thasFeedback\r\n\t\t\t\t\t\t\tlabel={langs.where('2B', langKey).name}\r\n\t\t\t\t\t\t\tlabelCol={{ span: 3 }}\r\n\t\t\t\t\t\t\twrapperCol={{ span: 16, offset: 0 }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{getFieldDecorator('lang_' + langKey, {\r\n\t\t\t\t\t\t\t\tinitialValue: this.state[`lang_${langKey}`],\r\n\t\t\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Please enter a translation'\r\n\t\t\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t<Col span={12}>\r\n\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Name in that language'\r\n\t\t\t\t\t\t\t\t\t\tdefaultValue={this.state[`lang_${langKey}`]}\r\n\t\t\t\t\t\t\t\t\t\tlabel={langKey}\r\n\t\t\t\t\t\t\t\t\t/></Col>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t {Object.keys(this.state.i18n).length > 1 ? (\r\n\t\t\t\t\t\t\t\t<Col span={2}>\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Remove name\">\r\n\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"minus-circle-o\"\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={this.state.i18n.length === 1}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.removeLang(langKey)}\r\n\t\t\t\t\t\t\t\t\t\t/></Tooltip></Col>\r\n\t\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t))}\r\n\t\t\t\t{selectVisible && (\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"Select a language\"\r\n\t\t\t\t\t\tlabelCol={{ span: 3 }}\r\n\t\t\t\t\t\twrapperCol={{ span: 4, offset: 0 }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\t\tref={select => this.select = select}\r\n\t\t\t\t\t\t\tonChange={value => this.addLang(value)}>\r\n\t\t\t\t\t\t\t{ this.state.languages.map(lang => (<Select.Option value={lang.value}>\"{lang.text} ({lang.value.toUpperCase()})\"</Select.Option>)) }\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t)}\r\n\t\t\t\t{!selectVisible && (\r\n\t\t\t\t\t<Tag\r\n\t\t\t\t\t\tonClick={this.showSelect}\r\n\t\t\t\t\t\tstyle={{ borderStyle: 'dashed' }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon type=\"plus\" /> Add\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t)}\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\twrapperCol={{ span: 4, offset: 2 }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Button type='primary' htmlType='submit' className='series-form-button'>\r\n\t\t\t\t\t\tSave series\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t{getFieldDecorator('serie_id', {\r\n\t\t\t\t\t\tinitialValue: this.props.serie.serie_id\r\n\t\t\t\t\t})(<Input type=\"hidden\" />)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t{getFieldDecorator('i18n', {\r\n\t\t\t\t\t\tinitialValue: this.props.serie.i18n\r\n\t\t\t\t\t})(<Input type=\"hidden\" />)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nSerieForm.propTypes = {\r\n\tserie: PropTypes.object.isRequired,\r\n\tsave: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Form.create()(SerieForm);\r\n","import React, {Component} from 'react';\r\nimport {Layout} from 'antd';\r\nimport SerieForm from './SeriesForm';\r\nimport axios from 'axios/index';\r\nimport {connect} from 'react-redux';\r\nimport {push} from 'react-router-redux';\r\nimport {errorMessage, infoMessage, loading} from '../../actions/navigation';\r\n\r\nconst newSerie = {\r\n\tname: null,\r\n\taliases: [],\r\n\ti18n: {}\r\n};\r\n\r\nclass SerieEdit extends Component {\r\n\r\n\tstate = {\r\n\t\tserie: null,\r\n\t\tsave: () => {}\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.loadSerie();\r\n\t}\r\n\r\n\tsaveNew = (serie) => {\r\n\t\taxios.post('/api/series', serie)\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.props.infoMessage('Series successfully created');\r\n\t\t\t\tthis.props.push('/series');\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.props.errorMessage(`${err.response.status}: ${err.response.statusText}. ${err.response.data}`);\r\n\t\t\t});\r\n\t};\r\n\r\n\tsaveUpdate = (serie) => {\r\n\t\taxios.put(`/api/series/${serie.serie_id}`, serie)\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.props.infoMessage('Series successfully edited');\r\n\t\t\t\tthis.props.push('/series');\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.props.errorMessage(`${err.response.status}: ${err.response.statusText}. ${err.response.data}`);\r\n\t\t\t});\r\n\t};\r\n\r\n\tloadSerie = () => {\r\n\t\tthis.props.loading(true);\r\n\t\tif (this.props.match && this.props.match.params.serie_id) {\r\n\t\t\taxios.get(`/api/series/${this.props.match.params.serie_id}`)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconst serieData = {...res.data};\r\n\t\t\t\t\tserieData.serie_id = this.props.match.params.serie_id;\r\n\t\t\t\t\tthis.setState({serie: serieData, save: this.saveUpdate});\r\n\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.props.errorMessage(`${err.response.status}: ${err.response.statusText}. ${err.response.data}`);\r\n\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({serie: {...newSerie}, save: this.saveNew});\r\n\t\t\tthis.props.loading(false);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Layout.Content style={{padding: '25px 50px', textAlign: 'center'}}>\r\n\t\t\t\t{this.state.serie && (<SerieForm serie={this.state.serie} save={this.state.save} />)}\r\n\t\t\t</Layout.Content>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloadingActive: state.navigation.loading\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tloading: (active) => dispatch(loading(active)),\r\n\tinfoMessage: (message) => dispatch(infoMessage(message)),\r\n\terrorMessage: (message) => dispatch(errorMessage(message)),\r\n\tpush: (url) => dispatch(push(url))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SerieEdit);"],"sourceRoot":""}