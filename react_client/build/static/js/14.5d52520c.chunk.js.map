{"version":3,"sources":["pages/Karas/Viewcounts.js"],"names":["KaraList","props","_this","Object","_home_bibah_Documents_Karaoke_Mugen_karaokemugen_app_react_client_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_home_bibah_Documents_Karaoke_Mugen_karaokemugen_app_react_client_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_bibah_Documents_Karaoke_Mugen_karaokemugen_app_react_client_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","columns","title","dataIndex","key","render","language","toUpperCase","serie","record","singer","songtype","replace","songorder","defaultSortOrder","viewcount","sorter","a","b","state","karas","kara","refresh","_this2","loading","axios","get","then","res","setState","data","catch","err","errorMessage","concat","response","status","statusText","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","antd__WEBPACK_IMPORTED_MODULE_8__","Content","style","padding","textAlign","antd__WEBPACK_IMPORTED_MODULE_9__","dataSource","rowKey","antd__WEBPACK_IMPORTED_MODULE_10__","type","onClick","bind","Component","connect","loadingActive","navigation","dispatch","active","message","warnMessage"],"mappings":"yNAOMA,cAEL,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAClBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAqCPQ,QAAU,CAAC,CACVC,MAAO,WACPC,UAAW,WACXC,IAAK,WACLC,OAAQ,SAAAC,GAAQ,OAAKA,EAASC,gBAC5B,CACFL,MAAO,gBACPC,UAAW,QACXC,IAAK,QACLC,OAAQ,SAACG,EAAOC,GAAR,OAAoBD,GAASC,EAAOC,SAC1C,CACFR,MAAO,OACPC,UAAW,WACXC,IAAK,WACLC,OAAQ,SAACM,EAAUF,GAAX,OAAuBE,EAASC,QAAQ,QAAQ,IAAM,IAAMH,EAAOI,YACzE,CACFX,MAAO,QACPC,UAAW,QACXC,IAAK,SACH,CACFF,MAAO,aACPC,UAAW,YACXC,IAAK,YACLU,iBAAkB,UAClBT,OAAQ,SAAAU,GAAS,OAAIA,GACrBC,OAAQ,SAACC,EAAEC,GAAH,OAASD,EAAEF,UAAYG,EAAEH,aA7DjCrB,EAAKyB,MAAQ,CACZC,MAAO,GACPC,KAAM,IAJW3B,mFASlBG,KAAKyB,4CAGI,IAAAC,EAAA1B,KACTA,KAAKJ,MAAM+B,SAAQ,GACnBC,IAAMC,IAAI,yBACRC,KAAK,SAAAC,GACLL,EAAK9B,MAAM+B,SAAQ,GACnBD,EAAKM,SAAS,CAACT,MAAOQ,EAAIE,SAE1BC,MAAM,SAAAC,GACNT,EAAK9B,MAAM+B,SAAQ,GACnBD,EAAK9B,MAAMwC,aAAX,GAAAC,OAA2BF,EAAIG,SAASC,OAAxC,MAAAF,OAAmDF,EAAIG,SAASE,WAAhE,MAAAH,OAA+EF,EAAIG,SAASL,0CAK9F,OACCQ,EAAArB,EAAAsB,cAACC,EAAA,EAAOC,QAAR,CAAgBC,MAAO,CAAEC,QAAS,YAAaC,UAAW,WACzDN,EAAArB,EAAAsB,cAACM,EAAA,EAAD,CACCC,WAAYjD,KAAKsB,MAAMC,MACvBnB,QAASJ,KAAKI,QACd8C,OAAO,cAERT,EAAArB,EAAAsB,cAACS,EAAA,EAAD,CAAQC,KAAK,UAAUC,QAASrD,KAAKyB,QAAQ6B,KAAKtD,OAAlD,mBAnCmBuD,aA+ERC,sBAVS,SAAClC,GAAD,MAAY,CACnCmC,cAAenC,EAAMoC,WAAW/B,UAGN,SAACgC,GAAD,MAAe,CACzChC,QAAS,SAACiC,GAAD,OAAYD,EAAShC,YAAQiC,KACtCxB,aAAc,SAACyB,GAAD,OAAaF,EAASvB,YAAayB,KACjDC,YAAa,SAACD,GAAD,OAAaF,EAASG,YAAYD,OAGjCL,CAA6C7D","file":"static/js/14.5d52520c.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport {connect} from 'react-redux';\r\nimport {Button, Layout, Table} from 'antd';\r\n\r\nimport {loading, errorMessage, warnMessage} from '../../actions/navigation';\r\n\r\nclass KaraList extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tkaras: [],\t\t\t\r\n\t\t\tkara: {}\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.refresh();\r\n\t}\r\n\r\n\trefresh() {\r\n\t\tthis.props.loading(true);\r\n\t\taxios.get('/api/karas/viewcounts')\r\n\t\t\t.then(res => {\r\n\t\t\t\tthis.props.loading(false);\r\n\t\t\t\tthis.setState({karas: res.data});\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.props.loading(false);\r\n\t\t\t\tthis.props.errorMessage(`${err.response.status}: ${err.response.statusText}. ${err.response.data}`);\r\n\t\t\t});\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Layout.Content style={{ padding: '25px 50px', textAlign: 'center' }}>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tdataSource={this.state.karas}\r\n\t\t\t\t\tcolumns={this.columns}\r\n\t\t\t\t\trowKey='viewcount'\r\n\t\t\t\t/>\r\n\t\t\t\t<Button type='primary' onClick={this.refresh.bind(this)}>Refresh</Button>\t\t\t\t\r\n\t\t\t</Layout.Content>\r\n\t\t);\r\n\t}\r\n\r\n\tcolumns = [{\r\n\t\ttitle: 'Language',\r\n\t\tdataIndex: 'language',\r\n\t\tkey: 'language',\r\n\t\trender: language => (language.toUpperCase())\r\n\t}, {\r\n\t\ttitle: 'Series/Singer',\r\n\t\tdataIndex: 'serie',\r\n\t\tkey: 'serie',\t\r\n\t\trender: (serie, record) => (serie || record.singer)\r\n\t}, {\r\n\t\ttitle: 'Type',\r\n\t\tdataIndex: 'songtype',\r\n\t\tkey: 'songtype',\t\t\r\n\t\trender: (songtype, record) => (songtype.replace('TYPE_','') + ' ' + record.songorder)\r\n\t}, {\r\n\t\ttitle: 'Title',\r\n\t\tdataIndex: 'title',\r\n\t\tkey: 'title'\t\t\r\n\t}, {\r\n\t\ttitle: 'View count',\r\n\t\tdataIndex: 'viewcount',\r\n\t\tkey: 'viewcount',\r\n\t\tdefaultSortOrder: 'descend',\r\n\t\trender: viewcount => viewcount,\r\n\t\tsorter: (a,b) => a.viewcount - b.viewcount\r\n\t}];\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloadingActive: state.navigation.loading\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tloading: (active) => dispatch(loading(active)),\r\n\terrorMessage: (message) => dispatch(errorMessage(message)),\r\n\twarnMessage: (message) => dispatch(warnMessage(message))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(KaraList);\r\n"],"sourceRoot":""}