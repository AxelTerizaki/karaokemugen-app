(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{503:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(2),r=n.n(a),i=n(8),s=n.n(i),l=n(0),o=n(14),c=n.n(o),u=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n};function d(e){var t,n=e.prefixCls,a=void 0===n?"ant":n,i=e.type,o=void 0===i?"horizontal":i,d=e.orientation,f=void 0===d?"":d,p=e.className,m=e.children,h=e.dashed,g=u(e,["prefixCls","type","orientation","className","children","dashed"]),v=f.length>0?"-"+f:f,y=c()(p,a+"-divider",a+"-divider-"+o,(t={},s()(t,a+"-divider-with-text"+v,m),s()(t,a+"-divider-dashed",!!h),t));return l.createElement("div",r()({className:y},g),m&&l.createElement("span",{className:a+"-divider-inner-text"},m))}},525:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n(21),i=n(23),s=n(22),l=n(24),o=n(0),c=n.n(o),u=n(49),d=n.n(u),f=n(25),p=n(2),m=n.n(p),h=n(8),g=n.n(h),v=n(5),y=n.n(v),x=n(13),E=n.n(x),b=n(4),O=n.n(b),k=n(7),_=n.n(k),C=n(10),w=n(15),S=n(14),M=n.n(S),j=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n},I=function(e){function t(e){y()(this,t);var n=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setScale=function(){var e=n.avatarChildren;if(e){var t=e.offsetWidth,a=C.findDOMNode(n).getBoundingClientRect().width;a-8<t?n.setState({scale:(a-8)/t}):n.setState({scale:1})}},n.handleImgLoadError=function(){var e=n.props.onError;!1!==(e?e():void 0)&&n.setState({isImgExist:!1})},n.state={scale:1,isImgExist:!0},n}return _()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.setScale()}},{key:"componentDidUpdate",value:function(e,t){(e.children!==this.props.children||t.scale!==this.state.scale&&1===this.state.scale||t.isImgExist!==this.state.isImgExist)&&this.setScale()}},{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.prefixCls,i=a.shape,s=a.size,l=a.src,c=a.icon,u=a.className,d=a.alt,f=j(a,["prefixCls","shape","size","src","icon","className","alt"]),p=this.state,h=p.isImgExist,v=p.scale,y=M()((e={},g()(e,r+"-lg","large"===s),g()(e,r+"-sm","small"===s),e)),x=M()(r,u,y,(t={},g()(t,r+"-"+i,i),g()(t,r+"-image",l&&h),g()(t,r+"-icon",c),t)),E="number"===typeof s?{width:s,height:s,lineHeight:s+"px",fontSize:c?s/2:18}:{},b=this.props.children;if(l&&h)b=o.createElement("img",{src:l,onError:this.handleImgLoadError,alt:d});else if(c)b=o.createElement(w.a,{type:c});else{var O=this.avatarChildren;if(O||1!==v){var k={msTransform:"scale("+v+")",WebkitTransform:"scale("+v+")",transform:"scale("+v+")",position:"absolute",display:"inline-block",left:"calc(50% - "+Math.round(O.offsetWidth/2)+"px)"},_="number"===typeof s?{lineHeight:s+"px"}:{};b=o.createElement("span",{className:r+"-string",ref:function(e){return n.avatarChildren=e},style:m()({},_,k)},b)}else b=o.createElement("span",{className:r+"-string",ref:function(e){return n.avatarChildren=e}},b)}return o.createElement("span",m()({},f,{style:m()({},E,f.style),className:x}),b)}}]),t}(o.Component),N=I;I.defaultProps={prefixCls:"ant-avatar",shape:"circle",size:"default"};var P=n(80),A=n(503),D=n(54),T=n(521),z=n(516),L=n(519),U=n(27),F=n(506),W=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).delete=function(e){d.a.delete("/api/users/".concat(e)).then(function(){n.props.warnMessage("User deleted."),n.setState({deleteModal:!1,user:{}}),n.refresh()}).catch(function(e){n.props.errorMessage("Error ".concat(e.response.status," while deleting user: ").concat(e.response.statusText,". ").concat(e.response.data)),n.setState({deleteModal:!1,user:{}})})},n.columns=[{title:"ID",dataIndex:"user_id",key:"user_id",render:function(e){return c.a.createElement(F.a,{to:"/users/".concat(e)},e)},defaultSortOrder:"ascend",sorter:function(e,t){return e.user_id-t.user_id}},{title:"Type",dataIndex:"type",key:"type",filters:[{text:"User",value:"1"},{text:"Guest",value:"2"}],render:function(e){return 1===e?"User":"Guest"},filterMultiple:!1,onFilter:function(e,t){return"".concat(t.type)===e}},{title:"Avatar",dataIndex:"avatar_file",key:"avatar_file",render:function(e,t){return c.a.createElement(N,{shape:"square",size:"large",src:"/static/avatars/".concat(t.avatar_file)})},sorter:function(e,t){return e.avatar_file.localeCompare(t.avatar_file)}},{title:"Username",dataIndex:"login",key:"login",render:function(e,t){return c.a.createElement(F.a,{to:"/users/".concat(t.user_id)},e)},sorter:function(e,t){return e.login.localeCompare(t.login)}},{title:"Nickname",dataIndex:"nickname",key:"nickname",render:function(e,t){return c.a.createElement(F.a,{to:"/users/".concat(t.user_id)},e)},sorter:function(e,t){return e.nickname.localeCompare(t.nickname)}},{title:"Last seen on",dataIndex:"last_login",key:"last_login",render:function(e){return new Date(1e3*+e).toLocaleString("en")},sorter:function(e,t){return e.last_login-t.last_login}},{title:"Logged in?",dataIndex:"flag_online",key:"flag_online",filters:[{text:"Online",value:"1"},{text:"Offline",value:"0"}],render:function(e){return c.a.createElement(P.a,{disabled:!0,defaultChecked:1===e})},filterMultiple:!1,onFilter:function(e,t){return"".concat(t.flag_online)===e}},{title:"Admin?",dataIndex:"flag_admin",key:"flag_admin",filters:[{text:"Admin",value:"1"},{text:"Standard",value:"0"}],render:function(e){return c.a.createElement(P.a,{disabled:!0,defaultChecked:1===e})},filterMultiple:!1,onFilter:function(e,t){return"".concat(t.flag_admin)===e}},{title:"Action",key:"action",render:function(e,t){return c.a.createElement("span",null,c.a.createElement(F.a,{to:"/users/".concat(t.user_id)},c.a.createElement(w.a,{type:"edit"})),c.a.createElement(A.a,{type:"vertical"}),c.a.createElement(D.a,{type:"danger",icon:"delete",onClick:function(){return n.setState({deleteModal:!0,user:t})}}))}}],n.state={users:[],deleteModal:!1,user:{}},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;this.props.loading(!0),d.a.get("/api/users").then(function(t){e.props.loading(!1),e.setState({users:t.data})}).catch(function(t){e.props.loading(!1),e.props.errorMessage("".concat(t.response.status,": ").concat(t.response.statusText,". ").concat(t.response.data))})}},{key:"render",value:function(){var e=this;return c.a.createElement(T.a.Content,{style:{padding:"25px 50px",textAlign:"center"}},c.a.createElement(z.a,{dataSource:this.state.users,columns:this.columns,rowKey:"nickname"}),c.a.createElement(D.a,{type:"primary",onClick:this.refresh.bind(this)},"Refresh"),c.a.createElement(L.a,{title:"Confirm user delete",visible:this.state.deleteModal,onOk:function(){return e.delete(e.state.user.user_id)},onCancel:function(){return e.setState({deleteModal:!1,user:{}})},okText:"yes",cancelText:"no"},c.a.createElement("p",null,"Delete user ",c.a.createElement("b",null,this.state.user.login)),c.a.createElement("p",null,"Are you sure?")))}}]),t}(o.Component);t.default=Object(f.b)(function(e){return{loadingActive:e.navigation.loading}},function(e){return{loading:function(t){return e(Object(U.i)(t))},errorMessage:function(t){return e(Object(U.g)(t))},warnMessage:function(t){return e(Object(U.j)(t))}}})(W)}}]);
//# sourceMappingURL=18.48a50369.chunk.js.map