(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{529:function(e,t,a){"use strict";a.r(t);var n=a(36),s=a(20),r=a(21),i=a(23),o=a(22),c=a(24),l=a(0),u=a.n(l),p=a(521),d=a(517),m=a(61),h=a(79),f=a(15),g=a(80),b=a(54),E=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={adminChecked:!1},a.toggleAdmin=function(e){return a.setState({adminChecked:e.target.checked})},a.passwordValidator=function(e,t,n){var s=a.props.form,r=s.getFieldValue("type"),i=s.getFieldValue("id");"2"===r&&t?n("A guest cannot have a password"):"1"!==r||i||t?n():n("A user must have a password")},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||a.props.save(t)})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setState({adminChecked:1===this.props.user.flag_admin})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return u.a.createElement(d.a,{onSubmit:this.handleSubmit,className:"login-form"},u.a.createElement(d.a.Item,null,e("id",{initialValue:this.props.user.id})(u.a.createElement(m.a,{type:"hidden"}))),u.a.createElement(d.a.Item,{hasFeedback:!0},e("type",{rules:[{required:!0}],initialValue:"".concat(this.props.user.type)})(u.a.createElement(h.a,null,u.a.createElement(h.a.Option,{value:"1"},"User"),u.a.createElement(h.a.Option,{value:"2"},"Guest")))),u.a.createElement(d.a.Item,{hasFeedback:!0},e("login",{rules:[{required:!0}],initialValue:this.props.user.login})(u.a.createElement(m.a,{prefix:u.a.createElement(f.a,{type:"user"}),onPressEnter:this.handleSubmit,placeholder:"Username"}))),u.a.createElement(d.a.Item,{hasFeedback:!0},e("password",{rules:[{validator:this.passwordValidator}]})(u.a.createElement(m.a,{prefix:u.a.createElement(f.a,{type:"lock"}),type:"password",onPressEnter:this.handleSubmit,placeholder:"Password"}))),u.a.createElement(d.a.Item,{hasFeedback:!0},e("nickname",{initialValue:this.props.user.nickname})(u.a.createElement(m.a,{onPressEnter:this.handleSubmit,placeholder:"Nickname"}))),u.a.createElement(d.a.Item,{hasFeedback:!0},e("bio",{initialValue:this.props.user.bio})(u.a.createElement(m.a.TextArea,{rows:3,placeholder:"Bio"}))),u.a.createElement(d.a.Item,{hasFeedback:!0},e("email",{rules:[{type:"email"}],initialValue:this.props.user.email})(u.a.createElement(m.a,{onPressEnter:this.handleSubmit,placeholder:"Email"}))),u.a.createElement(d.a.Item,{hasFeedback:!0},e("url",{rules:[{type:"url"}],initialValue:this.props.user.url})(u.a.createElement(m.a,{onPressEnter:this.handleSubmit,placeholder:"Website"}))),u.a.createElement(d.a.Item,null,e("flag_admin",{valuePropName:"flag_admin",initialValue:1===this.props.user.flag_admin})(u.a.createElement(g.a,{checked:this.state.adminChecked,onChange:this.toggleAdmin},"Administrator"))),u.a.createElement(d.a.Item,null,u.a.createElement(b.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Save")))}}]),t}(l.Component),v=d.a.create()(E),k=a(49),y=a.n(k),w=a(25),O=a(41),j=a(27),S={user_id:null,type:1,login:null,password:null,nickname:null,flag_admin:!1},I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={user:null,save:function(){}},a.saveNew=function(e){y.a.post("/api/users",e).then(function(){a.props.infoMessage("User successfully created"),a.props.push("/users")}).catch(function(e){a.props.errorMessage("".concat(e.response.status,": ").concat(e.response.statusText,". ").concat(e.response.data))})},a.saveUpdate=function(e){y.a.put("/api/users/".concat(e.id),e).then(function(){a.props.infoMessage("User successfully edited"),a.props.push("/users")}).catch(function(e){a.props.errorMessage("".concat(e.response.status,": ").concat(e.response.statusText,". ").concat(e.response.data))})},a.loadUser=function(){a.props.loading(!0),a.props.match&&a.props.match.params.userId?y.a.get("/api/users/".concat(a.props.match.params.userId)).then(function(e){a.setState({user:e.data,save:a.saveUpdate}),a.props.loading(!1)}).catch(function(e){a.props.errorMessage("".concat(e.response.status,": ").concat(e.response.statusText,". ").concat(e.response.data)),a.props.loading(!1)}):(a.setState({user:Object(n.a)({},S),save:a.saveNew}),a.props.loading(!1))},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){return u.a.createElement(p.a.Content,{style:{padding:"25px 50px",textAlign:"center"}},this.state.user&&u.a.createElement(v,{user:this.state.user,save:this.state.save}))}}]),t}(l.Component);t.default=Object(w.b)(function(e){return{loadingActive:e.navigation.loading}},function(e){return{loading:function(t){return e(Object(j.i)(t))},infoMessage:function(t){return e(Object(j.h)(t))},errorMessage:function(t){return e(Object(j.g)(t))},push:function(t){return e(Object(O.c)(t))}}})(I)}}]);
//# sourceMappingURL=8.efd78882.chunk.js.map