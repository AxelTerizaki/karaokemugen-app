(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{146:function(e,t,n){e.exports=n(259)},256:function(e,t,n){},259:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=n(20),l=n(21),s=n(23),u=n(22),m=n(24),h=n(49),p=n.n(h),d=n(25),f=n(41),b=n(530),g=n(523),y=n(527),E=n(521),k=n(55),O=n(140),j=n.n(O),v=n(36),w=n(27),I=n(47),C=j()(),P=[Object(k.a)(Object(f.d)(C))],S=Object(k.e)(Object(k.c)({navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.c:return Object(v.a)({},e,{infomsg:t.message});case w.e:return Object(v.a)({},e,{warnmsg:t.message});case w.b:return Object(v.a)({},e,{errormsg:t.message});case w.a:return Object(v.a)({},e,{infomsg:"",warnmsg:"",errormsg:""});case w.d:return Object(v.a)({},e,{loading:t.active});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.b:return Object(v.a)({},e,{error:"",authenticated:!0,username:t.username,role:t.role});case I.c:return Object(v.a)({},e,{authenticated:!1,username:"",role:""});case I.a:return Object(v.a)({},e,{authenticated:!1,username:"",role:"",error:t.payload});default:return e}},router:f.e}),{},k.d.apply(void 0,P)),M=n(506),x=n(504),K=n(15),_=n(54),W=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={current:"",connectOpenKeys:[]},n.handleClick=function(e){n.setState({current:e.key})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"connectMenu",value:function(){var e=this;return this.props.authenticated?r.a.createElement("div",null,r.a.createElement(x.a,{mode:"horizontal",theme:"dark",style:{lineHeight:"56px"},onClick:function(){return e.setState({connectOpenKeys:[]})},openKeys:this.state.connectOpenKeys},r.a.createElement(x.a.Item,{key:"user"},r.a.createElement("span",null,r.a.createElement(K.a,{type:"user"}),this.props.username)),r.a.createElement(x.a.Item,{key:"logout"},r.a.createElement(_.a,{icon:"logout",onClick:this.props.logout},"Log Out")))):r.a.createElement("div",null,r.a.createElement(x.a,{mode:"horizontal",theme:"dark",style:{lineHeight:"56px"},onClick:function(){return e.setState({connectOpenKeys:[]})},openKeys:this.state.connectOpenKeys},r.a.createElement(x.a.Item,{key:"login",style:{float:"right"}},r.a.createElement(_.a,{icon:"login",onClick:function(){return e.props.push("/login")}},"Log In"))))}},{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(x.a,{mode:"horizontal",theme:"dark",style:{lineHeight:"56px"}},r.a.createElement(x.a.Item,{key:"home"},r.a.createElement(M.a,{to:"/home"},"Home")),r.a.createElement(x.a.Item,{key:"config"},r.a.createElement(M.a,{to:"/config"},"Configuration")),r.a.createElement(x.a.SubMenu,{title:"Karas"},r.a.createElement(x.a.Item,{key:"karamanage"},r.a.createElement(M.a,{to:"/karas"},"List")),r.a.createElement(x.a.Item,{key:"karaimport"},r.a.createElement(M.a,{to:"/karas/create"},"New")),r.a.createElement(x.a.Item,{key:"karahistory"},r.a.createElement(M.a,{to:"/karas/history"},"History")),r.a.createElement(x.a.Item,{key:"kararanking"},r.a.createElement(M.a,{to:"/karas/ranking"},"Most requested")),r.a.createElement(x.a.Item,{key:"karaviewcounts"},r.a.createElement(M.a,{to:"/karas/viewcounts"},"Most played"))),r.a.createElement(x.a.SubMenu,{title:"Series"},r.a.createElement(x.a.Item,{key:"seriesmanage"},r.a.createElement(M.a,{to:"/series"},"List")),r.a.createElement(x.a.Item,{key:"seriesnew"},r.a.createElement(M.a,{to:"/series/new"},"New"))),r.a.createElement(x.a.Item,{key:"db"},r.a.createElement(M.a,{to:"/db"},"Database")),r.a.createElement(x.a.SubMenu,{title:"Users"},r.a.createElement(x.a.Item,{key:"userlist"},r.a.createElement(M.a,{to:"/users"},"User list")),r.a.createElement(x.a.Item,{key:"newuser"},r.a.createElement(M.a,{to:"/users/create"},"Create new user"))))),this.connectMenu())}}]),t}(a.Component),z=Object(d.b)(function(e){return{authenticated:e.auth.authenticated,username:e.auth.username}},function(e){return{logout:function(){return e(Object(I.f)())},push:function(t){return e(Object(f.c)(t))}}})(W),A=n(524),H=n(350);function L(){return r.a.createElement(H.a,{tip:"Loading..."},r.a.createElement(A.a,{message:"Loading",description:"Please wait...",type:"info"}))}var T=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"info",value:function(){return this.props.infomsg?r.a.createElement(A.a,{type:"info",showIcon:!0,closable:!0,onClose:this.props.dismissInfo,message:"Information",description:this.props.infomsg}):null}},{key:"warn",value:function(){return this.props.warnmsg?r.a.createElement(A.a,{type:"warning",showIcon:!0,closable:!0,onClose:this.props.dismissWarn,message:"Warning",description:this.props.warnmsg}):null}},{key:"error",value:function(){return this.props.errormsg?r.a.createElement(A.a,{type:"error",showIcon:!0,closable:!0,onClose:this.props.dismissError,message:"Error",description:this.props.errormsg}):null}},{key:"loading",value:function(){return this.props.loading?r.a.createElement(L,null):null}},{key:"render",value:function(){return r.a.createElement("div",null,this.info(),this.warn(),this.error(),this.loading())}}]),t}(a.Component),N=Object(d.b)(function(e){return{infomsg:e.navigation.infomsg,warnmsg:e.navigation.warnmsg,errormsg:e.navigation.errormsg,loading:e.navigation.loading}},function(e){return{dismissInfo:function(){return e(Object(w.h)(null))},dismissWarn:function(){return e(Object(w.j)(null))},dismissError:function(){return e(Object(w.g)(null))}}})(T),U=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.alreadyConnected()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a.Header,{style:{height:"56px"}},r.a.createElement(z,null)),r.a.createElement(N,null))}}]),t}(a.Component),B=Object(d.b)(null,function(e){return{alreadyConnected:function(){return Object(I.d)()(e)}}})(U),J=function(e){var t=function(t){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(s.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).state={},t}return Object(m.a)(n,t),Object(l.a)(n,[{key:"componentWillMount",value:function(){var t=this;e.then(function(e){return t.setState({c:e})})}},{key:"render",value:function(){return void 0!==this.props.authenticated&&this.state.c?this.props.authenticated?this.state.c.default?r.a.createElement(this.state.c.default,this.props):r.a.createElement(this.state.c,this.props):r.a.createElement(g.a,{to:"/login",push:!0}):r.a.createElement(L,null)}}]),n}(a.Component);return Object(d.b)(function(e){return{authenticated:e.auth.authenticated}})(t)},q=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a.Content,{style:{padding:"25px 50px",textAlign:"center"}},r.a.createElement("h1",null,"Welcome to Karaoke Mugen's control panel"),r.a.createElement("p",null,"You can manage users, create .kara files, update your base or regenerate the database from here."))}}]),t}(a.Component),D=Object(d.b)()(q),F=(n(256),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("kmToken");e&&(p.a.defaults.headers.common.authorization=e)}},{key:"render",value:function(){return r.a.createElement(d.a,{store:S},r.a.createElement(f.a,{history:C},r.a.createElement(E.a,{className:"layout"},r.a.createElement(B,null),r.a.createElement(b.a,null,r.a.createElement(g.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(y.a,{path:"/home",component:D}),r.a.createElement(y.a,{path:"/login",component:function(e){var t=function(t){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(s.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).state={},t}return Object(m.a)(n,t),Object(l.a)(n,[{key:"componentWillMount",value:function(){var t=this;this.props.dismissAll(),e.then(function(e){return t.setState({c:e})})}},{key:"render",value:function(){return this.state.c?this.state.c.default?r.a.createElement(this.state.c.default,this.props):r.a.createElement(this.state.c,this.props):r.a.createElement(L,null)}}]),n}(a.Component);return Object(d.b)(null,function(e){return{dismissAll:function(){return e(Object(w.f)())}}})(t)}(Promise.all([n.e(0),n.e(3),n.e(10)]).then(n.bind(null,507)))}),r.a.createElement(y.a,{path:"/config",component:J(Promise.all([n.e(0),n.e(1),n.e(2),n.e(11)]).then(n.bind(null,520)))}),r.a.createElement(y.a,{path:"/karas/create",component:J(Promise.all([n.e(0),n.e(1),n.e(3),n.e(4),n.e(6)]).then(n.bind(null,518)))}),r.a.createElement(y.a,{path:"/karas/history",component:J(Promise.all([n.e(0),n.e(1),n.e(2),n.e(12)]).then(n.bind(null,510)))}),r.a.createElement(y.a,{path:"/karas/ranking",component:J(Promise.all([n.e(0),n.e(1),n.e(2),n.e(13)]).then(n.bind(null,511)))}),r.a.createElement(y.a,{path:"/karas/viewcounts",component:J(Promise.all([n.e(0),n.e(1),n.e(2),n.e(14)]).then(n.bind(null,512)))}),r.a.createElement(y.a,{path:"/karas/:kara_id",component:J(Promise.all([n.e(0),n.e(1),n.e(3),n.e(4),n.e(6)]).then(n.bind(null,518)))}),r.a.createElement(y.a,{path:"/karas",component:J(Promise.all([n.e(0),n.e(1),n.e(2),n.e(15)]).then(n.bind(null,513)))}),r.a.createElement(y.a,{path:"/series/new",component:J(Promise.all([n.e(0),n.e(1),n.e(3),n.e(4),n.e(7)]).then(n.bind(null,528)))}),r.a.createElement(y.a,{path:"/series/:serie_id",component:J(Promise.all([n.e(0),n.e(1),n.e(3),n.e(4),n.e(7)]).then(n.bind(null,528)))}),r.a.createElement(y.a,{path:"/series",component:J(Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(16)]).then(n.bind(null,514)))}),r.a.createElement(y.a,{path:"/db",component:J(Promise.all([n.e(5),n.e(17)]).then(n.bind(null,515)))}),r.a.createElement(y.a,{path:"/users/create",component:J(Promise.all([n.e(0),n.e(1),n.e(3),n.e(8)]).then(n.bind(null,529)))}),r.a.createElement(y.a,{path:"/users/:userId",component:J(Promise.all([n.e(0),n.e(1),n.e(3),n.e(8)]).then(n.bind(null,529)))}),r.a.createElement(y.a,{path:"/users",component:J(Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(18)]).then(n.bind(null,525)))})))))}}]),t}(a.Component));c.a.render(r.a.createElement(F,null),document.getElementById("root"))},27:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return i}),n.d(t,"h",function(){return l}),n.d(t,"j",function(){return s}),n.d(t,"g",function(){return u}),n.d(t,"f",function(){return m}),n.d(t,"i",function(){return h});var a="info_msg",r="warn_msg",o="error_msg",c="dismiss_all",i="loading";function l(e){return{type:a,message:e}}function s(e){return{type:r,message:e}}function u(e){return{type:o,message:e}}function m(){return{type:c}}function h(e){return{type:i,active:e}}},47:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return m}),n.d(t,"f",function(){return h});var a=n(49),r=n.n(a),o=n(141),c=n(41),i="auth_user",l="unauth_user",s="auth_error";function u(e,t){return function(n){r.a.post("/api/login",Object(o.stringify)({username:e,password:t}),{headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){localStorage.setItem("kmToken",e.data.token),localStorage.setItem("username",e.data.username),r.a.defaults.headers.common.authorization=e.data.token,n({type:i,username:e.data.username,role:e.data.role}),n(Object(c.b)())}).catch(function(e){return n({type:s,payload:"Bad login info: "+e})})}}function m(){return function(e){r.a.get("/api/checkauth").then(function(t){localStorage.setItem("username",t.data.username),e({type:i,username:t.data.username,role:t.data.role})}).catch(function(t){return e({type:l})})}}function h(){return localStorage.removeItem("kmToken"),delete r.a.defaults.headers.common.authorization,{type:l}}}},[[146,20,19]]]);
//# sourceMappingURL=main.56de7bcb.chunk.js.map