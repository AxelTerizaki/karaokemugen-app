{"version":3,"sources":["store.js","reducers/navigation.js","reducers/auth.js","layout/KMMenu.js","components/Loading.js","layout/Notifications.js","layout/KMHeader.js","components/AuthRequired.js","pages/Home.js","App.js","components/DismissMessages.js","index.js","actions/navigation.js","actions/auth.js"],"names":["history","createHistory","middleware","applyMiddleware","routerMiddleware","store","createStore","combineReducers","navigation","state","arguments","length","undefined","action","type","INFO_MSG","Object","objectSpread","infomsg","message","WARN_MSG","warnmsg","ERROR_MSG","errormsg","DISMISS_ALL","LOADING","loading","active","auth","AUTH_USER","error","authenticated","username","role","UNAUTH_USER","AUTH_ERROR","payload","router","routerReducer","compose","apply","KMMenu","current","connectOpenKeys","handleClick","e","_this","setState","key","_this2","this","props","react_default","a","createElement","menu","mode","theme","style","lineHeight","onClick","openKeys","Item","icon","es_button","logout","float","push","display","justifyContent","Link","to","SubMenu","title","connectMenu","Component","connect","dispatch","url","Loading","spin","tip","es_alert","description","Notifications","showIcon","closable","onClose","dismissInfo","dismissWarn","dismissError","info","warn","infoMessage","warnMessage","errorMessage","KMHeader","alreadyConnected","layout","Header","height","layout_KMMenu","layout_Notifications","checkAuth","AuthRequired","ComposedComponentPromise","Authentication","_Component","_getPrototypeOf2","classCallCheck","_len","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","concat","inherits","createClass","value","then","c","default","Redirect","Home","Content","padding","textAlign","App","token","localStorage","getItem","axios","defaults","headers","common","es","react_router_redux_es","className","layout_KMHeader","Switch","exact","from","Route","path","component","DismissMessages","dismissAll","Promise","all","__webpack_require__","bind","ReactDOM","render","src_App_0","document","getElementById","d","__webpack_exports__","login","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","qs__WEBPACK_IMPORTED_MODULE_1__","react_router_redux__WEBPACK_IMPORTED_MODULE_2__","password","post","stringify","Content-type","response","setItem","data","goBack","catch","err","get","removeItem"],"mappings":"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","file":"static/js/main.56de7bcb.chunk.js","sourcesContent":["import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\r\nimport { routerReducer, routerMiddleware } from 'react-router-redux';\r\nimport createHistory from 'history/createBrowserHistory';\r\n\r\nimport navigation from './reducers/navigation';\r\nimport auth from './reducers/auth';\r\n\r\nconst initialState = {};\r\n\r\nexport const history = createHistory();\r\n\r\nconst middleware = [\r\n\tapplyMiddleware(routerMiddleware(history))\r\n];\r\n\r\nexport const store = createStore(\r\n\tcombineReducers({ navigation, auth, router: routerReducer }),\r\n\tinitialState,\r\n\tcompose(...middleware)\r\n);\r\n","import {\r\n\tINFO_MSG, WARN_MSG, ERROR_MSG, DISMISS_ALL, LOADING\r\n} from '../actions/navigation';\r\n\r\n\r\nexport default function(state = {}, action) {\r\n\tswitch(action.type) {\r\n\tcase INFO_MSG:\r\n\t\treturn { ...state, infomsg: action.message };\r\n\tcase WARN_MSG:\r\n\t\treturn { ...state, warnmsg: action.message };\r\n\tcase ERROR_MSG:\r\n\t\treturn { ...state, errormsg: action.message };\r\n\tcase DISMISS_ALL:\r\n\t\treturn { ...state, infomsg: '', warnmsg: '', errormsg: ''};\r\n\tcase LOADING:\r\n\t\treturn { ...state, loading: action.active};\r\n\tdefault:\r\n\t\treturn state;\r\n\t}\t\r\n}","import {\r\n\tAUTH_USER,\r\n\tUNAUTH_USER,\r\n\tAUTH_ERROR\r\n} from '../actions/auth';\r\n\r\nexport default function(state = {}, action) {\r\n\tswitch(action.type) {\r\n\tcase AUTH_USER:\r\n\t\treturn { ...state, error: '', authenticated: true, username: action.username, role: action.role };\r\n\tcase UNAUTH_USER:\r\n\t\treturn { ...state, authenticated: false, username: '', role: '' };\r\n\tcase AUTH_ERROR:\r\n\t\treturn { ...state, authenticated: false, username: '', role: '', error: action.payload };\r\n\tdefault:\r\n\t\treturn state;\r\n\t\r\n\t}\t\t\r\n}","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {push} from 'react-router-redux';\r\nimport {Link} from 'react-router-dom';\r\nimport {Menu, Icon, Button} from 'antd';\r\n\r\nimport {logout} from '../actions/auth';\r\n\r\nclass KMMenu extends Component {\r\n\r\n\tstate = {\r\n\t\tcurrent: '',\r\n\t\tconnectOpenKeys: []\r\n\t};\r\n\r\n\thandleClick = (e) => {\r\n\t\tthis.setState({\r\n\t\t\tcurrent: e.key,\r\n\t\t});\r\n\t};\r\n\r\n\tconnectMenu() {\r\n\t\tif (this.props.authenticated) {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Menu\r\n\t\t\t\t\t\tmode='horizontal'\r\n\t\t\t\t\t\ttheme='dark'\r\n\t\t\t\t\t\tstyle={{ lineHeight: '56px' }}\r\n\t\t\t\t\t\tonClick={() => this.setState({connectOpenKeys: []})}\r\n\t\t\t\t\t\topenKeys={this.state.connectOpenKeys}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Menu.Item key='user'><span><Icon type='user' />{this.props.username}</span></Menu.Item>\r\n\t\t\t\t\t\t<Menu.Item key='logout'><Button icon='logout' onClick={this.props.logout}>Log Out</Button></Menu.Item>\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Menu\r\n\t\t\t\t\t\tmode='horizontal'\r\n\t\t\t\t\t\ttheme='dark'\r\n\t\t\t\t\t\tstyle={{lineHeight: '56px'}}\r\n\t\t\t\t\t\tonClick={() => this.setState({connectOpenKeys: []})}\r\n\t\t\t\t\t\topenKeys={this.state.connectOpenKeys}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Menu.Item key='login' style={{float: 'right'}}>\r\n\t\t\t\t\t\t\t<Button icon='login' onClick={() => this.props.push('/login')}>Log In</Button>\r\n\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Menu\r\n\t\t\t\t\t\tmode='horizontal'\r\n\t\t\t\t\t\ttheme='dark'\r\n\t\t\t\t\t\tstyle={{ lineHeight: '56px' }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Menu.Item key='home'><Link to='/home'>Home</Link></Menu.Item>\r\n\t\t\t\t\t\t<Menu.Item key='config'><Link to='/config'>Configuration</Link></Menu.Item>\r\n\t\t\t\t\t\t<Menu.SubMenu title='Karas'>\r\n\t\t\t\t\t\t\t<Menu.Item key='karamanage'><Link to='/karas'>List</Link></Menu.Item>\r\n\t\t\t\t\t\t\t<Menu.Item key='karaimport'><Link to='/karas/create'>New</Link></Menu.Item>\r\n\t\t\t\t\t\t\t<Menu.Item key='karahistory'><Link to='/karas/history'>History</Link></Menu.Item>\r\n\t\t\t\t\t\t\t<Menu.Item key='kararanking'><Link to='/karas/ranking'>Most requested</Link></Menu.Item>\r\n\t\t\t\t\t\t\t<Menu.Item key='karaviewcounts'><Link to='/karas/viewcounts'>Most played</Link></Menu.Item>\r\n\t\t\t\t\t\t</Menu.SubMenu>\r\n\t\t\t\t\t\t<Menu.SubMenu title='Series'>\r\n\t\t\t\t\t\t\t<Menu.Item key='seriesmanage'><Link to='/series'>List</Link></Menu.Item>\r\n\t\t\t\t\t\t\t<Menu.Item key='seriesnew'><Link to='/series/new'>New</Link></Menu.Item>\r\n\t\t\t\t\t\t</Menu.SubMenu>\r\n\t\t\t\t\t\t<Menu.Item key='db'><Link to='/db'>Database</Link></Menu.Item>\r\n\t\t\t\t\t\t<Menu.SubMenu title='Users'>\r\n\t\t\t\t\t\t\t<Menu.Item key='userlist'><Link to='/users'>User list</Link></Menu.Item>\r\n\t\t\t\t\t\t\t<Menu.Item key='newuser'><Link to='/users/create'>Create new user</Link></Menu.Item>\r\n\t\t\t\t\t\t</Menu.SubMenu>\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.connectMenu()}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tauthenticated: state.auth.authenticated,\r\n\tusername: state.auth.username,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tlogout: () => dispatch(logout()),\r\n\tpush: (url) => dispatch(push(url))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(KMMenu);\r\n","import React from 'react';\r\n\r\nimport {Alert, Spin} from 'antd';\r\n\r\nexport default function Loading() {\r\n\treturn (\r\n\t\t<Spin tip=\"Loading...\">\r\n\t\t\t<Alert\r\n\t\t\t\tmessage=\"Loading\"\r\n\t\t\t\tdescription=\"Please wait...\"\r\n\t\t\t\ttype=\"info\"\r\n\t\t\t/>\r\n\t\t</Spin>\r\n\t);\r\n}","import React, {Component} from 'react';\r\n\r\nimport {Alert} from \"antd\";\r\nimport {connect} from 'react-redux';\r\n\r\nimport {infoMessage, warnMessage, errorMessage} from '../actions/navigation';\r\nimport Loading from '../components/Loading';\r\n\r\nclass Notifications extends Component {\r\n\r\n\tinfo() {\r\n\t\treturn this.props.infomsg ? (\r\n\t\t\t<Alert\r\n\t\t\t\ttype=\"info\"\r\n\t\t\t\tshowIcon\r\n\t\t\t\tclosable onClose={this.props.dismissInfo}\r\n\t\t\t\tmessage=\"Information\"\r\n\t\t\t\tdescription={this.props.infomsg}\r\n\t\t\t/>\r\n\t\t) : null;\r\n\t}\r\n\r\n\twarn() {\r\n\t\treturn this.props.warnmsg ? (\r\n\t\t\t<Alert\r\n\t\t\t\ttype=\"warning\"\r\n\t\t\t\tshowIcon\r\n\t\t\t\tclosable onClose={this.props.dismissWarn}\r\n\t\t\t\tmessage=\"Warning\"\r\n\t\t\t\tdescription={this.props.warnmsg}\r\n\t\t\t/>\r\n\t\t) : null;\r\n\t}\r\n\r\n\terror() {\r\n\t\treturn this.props.errormsg ? (\r\n\t\t\t<Alert\r\n\t\t\t\ttype=\"error\"\r\n\t\t\t\tshowIcon\r\n\t\t\t\tclosable onClose={this.props.dismissError}\r\n\t\t\t\tmessage=\"Error\"\r\n\t\t\t\tdescription={this.props.errormsg}\r\n\t\t\t/>\r\n\t\t) : null;\r\n\t}\r\n\r\n\tloading() {\r\n\t\treturn this.props.loading ? (<Loading/>) : null;\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.info()}\r\n\t\t\t\t{this.warn()}\r\n\t\t\t\t{this.error()}\r\n\t\t\t\t{this.loading()}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tinfomsg: state.navigation.infomsg,\r\n\twarnmsg: state.navigation.warnmsg,\r\n\terrormsg: state.navigation.errormsg,\r\n\tloading: state.navigation.loading\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tdismissInfo: () => dispatch(infoMessage(null)),\r\n\tdismissWarn: () => dispatch(warnMessage(null)),\r\n\tdismissError: () => dispatch(errorMessage(null))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Notifications);\r\n","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Layout} from 'antd';\r\n\r\nimport {checkAuth} from '../actions/auth';\r\n\r\nimport KMMenu from './KMMenu';\r\nimport Notifications from './Notifications';\r\n\r\nclass KMHeader extends Component {\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.props.alreadyConnected();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Layout.Header style={{height: '56px'}}>\r\n\t\t\t\t\t<KMMenu/>\r\n\t\t\t\t</Layout.Header>\r\n\t\t\t\t<Notifications/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\talreadyConnected: () => checkAuth()(dispatch)\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(KMHeader);\r\n","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {Redirect} from 'react-router-dom';\r\nimport Loading from './Loading';\r\n\r\nexport default function(ComposedComponentPromise) {\r\n\r\n\tclass Authentication extends Component {\r\n\r\n\t\tstate = {};\r\n\r\n\t\tcomponentWillMount() {\r\n\t\t\tComposedComponentPromise.then(c => this.setState({ c: c}));\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tif (this.props.authenticated === undefined || !this.state.c) {\r\n\t\t\t\treturn <Loading/>;\r\n\t\t\t} else if (this.props.authenticated) {\r\n\t\t\t\treturn this.state.c.default ? <this.state.c.default {...this.props} />\r\n\t\t\t\t\t: <this.state.c {...this.props} />;\r\n\t\t\t} else {\r\n\t\t\t\treturn <Redirect to='/login' push={true}/>;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst mapStateToProps = (state) => ({\r\n\t\tauthenticated: state.auth.authenticated\r\n\t});\r\n\r\n\treturn connect(mapStateToProps)(Authentication);\r\n}","import React, {Component} from 'react';\r\nimport {Layout} from 'antd';\r\nimport {connect} from 'react-redux';\r\n\r\nclass Home extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Layout.Content style={{ padding: '25px 50px', textAlign: 'center' }}>\r\n\t\t\t\t<h1>Welcome to Karaoke Mugen's control panel</h1>\r\n\t\t\t\t<p>You can manage users, create .kara files, update your base or regenerate the database from here.</p>\r\n\t\t\t</Layout.Content>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect()(Home);","import React, {Component} from 'react';\r\n\r\nimport axios from 'axios';\r\nimport {Provider} from 'react-redux';\r\nimport {ConnectedRouter} from 'react-router-redux';\r\nimport {Redirect, Route, Switch} from 'react-router-dom';\r\nimport {Layout} from 'antd';\r\nimport {history, store} from './store';\r\n\r\nimport KMHeader from './layout/KMHeader';\r\n\r\nimport AuthRequired from './components/AuthRequired';\r\nimport DismissMessages from './components/DismissMessages';\r\nimport Home from './pages/Home';\r\n\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n\r\n\tcomponentWillMount() {\r\n\t\tconst token = localStorage.getItem('kmToken');\r\n\t\tif (token) {\r\n\t\t\taxios.defaults.headers.common['authorization'] = token;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Provider store={store}>\r\n\t\t\t\t<ConnectedRouter history={history}>\r\n\t\t\t\t\t<Layout className=\"layout\">\r\n\t\t\t\t\t\t<KMHeader/>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Redirect exact from='/' to='/home'/>\r\n\t\t\t\t\t\t\t<Route path='/home' component={Home}/>\r\n\t\t\t\t\t\t\t<Route path='/login' component={DismissMessages(import('./pages/Login'))}/>\r\n\t\t\t\t\t\t\t<Route path='/config' component={AuthRequired(import('./pages/Config'))}/>\r\n\t\t\t\t\t\t\t<Route path='/karas/create' component={AuthRequired(import('./pages/Karas/KaraEdit'))}/>\r\n\t\t\t\t\t\t\t<Route path='/karas/history' component={AuthRequired(import('./pages/Karas/History'))}/>\r\n\t\t\t\t\t\t\t<Route path='/karas/ranking' component={AuthRequired(import('./pages/Karas/Ranking'))}/>\r\n\t\t\t\t\t\t\t<Route path='/karas/viewcounts' component={AuthRequired(import('./pages/Karas/Viewcounts'))}/>\r\n\t\t\t\t\t\t\t<Route path='/karas/:kara_id' component={AuthRequired(import('./pages/Karas/KaraEdit'))}/>\r\n\t\t\t\t\t\t\t<Route path='/karas' component={AuthRequired(import('./pages/Karas/KaraList'))}/>\r\n\t\t\t\t\t\t\t<Route path='/series/new' component={AuthRequired(import('./pages/Series/SeriesEdit'))}/>\r\n\t\t\t\t\t\t\t<Route path='/series/:serie_id' component={AuthRequired(import('./pages/Series/SeriesEdit'))}/>\r\n\t\t\t\t\t\t\t<Route path='/series' component={AuthRequired(import('./pages/Series/SeriesList'))}/>\r\n\t\t\t\t\t\t\t<Route path='/db' component={AuthRequired(import('./pages/Database'))}/>\r\n\t\t\t\t\t\t\t<Route path='/users/create' component={AuthRequired(import('./pages/Users/UserEdit'))}/>\r\n\t\t\t\t\t\t\t<Route path='/users/:userId' component={AuthRequired(import('./pages/Users/UserEdit'))}/>\r\n\t\t\t\t\t\t\t<Route path='/users' component={AuthRequired(import('./pages/Users/UserList'))}/>\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</Layout>\r\n\t\t\t\t</ConnectedRouter>\r\n\t\t\t</Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","import React, {Component} from 'react';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {dismissAll} from '../actions/navigation';\r\nimport Loading from './Loading';\r\n\r\nexport default function(ComposedComponentPromise) {\r\n\r\n\tclass DismissMessages extends Component {\r\n\r\n\t\tstate = {};\r\n\r\n\t\tcomponentWillMount() {\r\n\t\t\tthis.props.dismissAll();\r\n\t\t\tComposedComponentPromise.then(c => this.setState({ c: c}));\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tif (!this.state.c) {\r\n\t\t\t\treturn <Loading/>;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.state.c.default ? <this.state.c.default {...this.props} />\r\n\t\t\t\t\t: <this.state.c {...this.props} />;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst mapDispatchToProps = (dispatch) => ({\r\n\t\tdismissAll: () => dispatch(dismissAll())\r\n\t});\r\n\r\n\treturn connect(null, mapDispatchToProps)(DismissMessages);\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n","export const INFO_MSG = 'info_msg';\r\nexport const WARN_MSG = 'warn_msg';\r\nexport const ERROR_MSG = 'error_msg';\r\nexport const DISMISS_ALL = 'dismiss_all';\r\n\r\nexport const LOADING = 'loading';\r\n\r\nexport function infoMessage(message) {\r\n\treturn { type: INFO_MSG, message: message };\r\n}\r\n\r\nexport function warnMessage(message) {\r\n\treturn { type: WARN_MSG, message: message };\r\n}\r\n\r\nexport function errorMessage(message) {\r\n\treturn { type: ERROR_MSG, message: message };\r\n}\r\n\r\nexport function dismissAll() {\r\n\treturn { type: DISMISS_ALL };\r\n}\r\n\r\nexport function loading(active) {\r\n\treturn { type: LOADING, active: active };\r\n}\r\n","import axios from 'axios';\r\nimport {stringify} from 'qs';\r\nimport {goBack} from 'react-router-redux';\r\n\r\nexport const AUTH_USER = 'auth_user';\r\nexport const UNAUTH_USER = 'unauth_user';\r\nexport const AUTH_ERROR = 'auth_error';\r\n\r\nexport function login(username, password) {\r\n\treturn function(dispatch) {\r\n\t\taxios.post('/api/login',\r\n\t\t\tstringify({username: username, password: password}),\r\n\t\t\t{\r\n\t\t\t\theaders: { 'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8' }\r\n\t\t\t}\r\n\t\t)\r\n\t\t\t.then(response => {\r\n\t\t\t\tlocalStorage.setItem('kmToken', response.data.token);\r\n\t\t\t\tlocalStorage.setItem('username', response.data.username);\r\n\t\t\t\taxios.defaults.headers.common['authorization'] = response.data.token;\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: AUTH_USER,\r\n\t\t\t\t\tusername: response.data.username,\r\n\t\t\t\t\trole: response.data.role\r\n\t\t\t\t});\r\n\t\t\t\tdispatch(goBack()); // Retour à la page précédente.\r\n\t\t\t})\r\n\t\t\t.catch(err => dispatch(authError('Bad login info: ' + err)));\r\n\t};\r\n}\r\n\r\nexport function checkAuth() {\r\n\treturn function(dispatch) {\r\n\t\taxios.get('/api/checkauth')\r\n\t\t\t.then(response => {\r\n\t\t\t\tlocalStorage.setItem('username', response.data.username);\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: AUTH_USER,\r\n\t\t\t\t\tusername: response.data.username,\r\n\t\t\t\t\trole: response.data.role\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(err => dispatch({ type: UNAUTH_USER }));\r\n\t};\r\n}\r\n\r\nexport function authError(error) {\r\n\treturn {\r\n\t\ttype: AUTH_ERROR,\r\n\t\tpayload: error\r\n\t};\r\n}\r\n\r\nexport function logout() {\r\n\tlocalStorage.removeItem('kmToken');\r\n\tdelete axios.defaults.headers.common['authorization'];\r\n\treturn { type: UNAUTH_USER };\r\n}\r\n"],"sourceRoot":""}